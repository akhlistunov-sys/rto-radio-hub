
# План изменений сайта РТО

## 1. Главная страница (ModernHeroSection.tsx)

### 1.1 Увеличение логотипов радиостанций
- Увеличить размер орбитальных логотипов с 80x80px до 100x100px
- Увеличить радиус орбиты со 160px до 200px
- Увеличить размер логотипов в нижней панели с 56x56px до 64x64px

### 1.2 Анимация смены частот на радиоле (FloatingRadio3D.tsx)
- Создать массив частот ваших станций: ["89.0", "105.9", "93.9", "88.1", "101.0", "105.3"]
- Добавить useState для текущего индекса частоты
- Настроить автоматическую смену частоты каждые 2-3 секунды с анимацией

### 1.3 Переименование кнопки
- Изменить текст "Рассчитать стоимость" на "Магия ИИ"
- Изменить ссылку на раздел "planner" (медиапланер)
- Обновить иконку на Sparkles

### 1.4 Упорядочивание ширины SoundWaveVisualizer
- Установить максимальную ширину звуковой анимации равной ширине контентного блока (max-w-md)

### 1.5 Уменьшение высоты страницы
- Изменить min-h-screen на min-h-[85vh]
- Уменьшить вертикальные отступы между элементами

---

## 2. Медиапланер (MediaPlanner.tsx + send-media-plan Edge Function)

### 2.1 Переименование кнопки
- Изменить "Получить медиаплан" на "Рекомендации ИИ"

### 2.2 Обновление промпта AI (media-planner Edge Function)
- Добавить рекомендацию длительности кампании 20-30 дней
- Рекомендовать от 4 радиостанций
- Указать что ролик в подарок (не включать в стоимость производства)
- Скорректировать расчеты по формулам из JSON

### 2.3 Отправка копии заявки админу
- Модифицировать send-media-plan Edge Function
- Отправлять полную копию заявки со всеми данными на a.khlistunov@gmail.com
- Включать все поля клиента и полный медиаплан

---

## 3. Калькулятор (Calculator.tsx)

### 3.1 Кнопка "Выбрать все радио"
- Добавить кнопку над сеткой радиостанций
- При нажатии выделить/снять все 6 станций

### 3.2 Хронометраж ролика
- Изменить минимум с 10 на 7 секунд
- Изменить максимум с 60 на 30 секунд
- Изменить шаг с 5 на 1 секунду

### 3.3 Ролик в подарок
- Убрать production_cost из расчета финальной стоимости

### 3.4 Новые временные слоты с процентами охвата
Заменить текущие слоты на 15 слотов с описаниями:
- 06:00-07:00 - Подъем, сборы (6%)
- 07:00-08:00 - Утренние поездки (10%)
- 08:00-09:00 - Пик трафика (12%)
- 09:00-10:00 - Начало работы (8%)
- 10:00-11:00 - Рабочий процесс (7%)
- 11:00-12:00 - Предобеденное время (6%)
- 12:00-13:00 - Обеденный перерыв (5%)
- 13:00-14:00 - После обеда (5%)
- 14:00-15:00 - Вторая половина дня (5%)
- 15:00-16:00 - Рабочий финиш (6%)
- 16:00-17:00 - Конец рабочего дня (7%)
- 17:00-18:00 - Вечерние поездки (10%)
- 18:00-19:00 - Пик трафика (8%)
- 19:00-20:00 - Домашний вечер (4%)
- 20:00-21:00 - Вечерний отдых (4%)

### 3.5 Кнопка "Выбрать все слоты"
- Добавить кнопку над сеткой слотов
- При нажатии выделить/снять все 15 слотов

### 3.6 Расчет стоимости по формулам JSON
Формулы из JSON:
```text
1. spots_per_day = stations_count × slots_count
2. total_spots = spots_per_day × campaign_days
3. applied_price_per_sec по тарифам:
   - 1-2 станции: 1.5 руб/сек
   - 3-4 станции: 1.3 руб/сек
   - 5 станций: 1.2 руб/сек
   - 6 станций: 1.1 руб/сек
4. cost_per_spot = duration × applied_price
5. base_air_cost = cost_per_spot × total_spots
6. Если все 15 слотов: скидка 5%
7. final_price = base_air_cost × (1 - bonus_discount)
8. Охват = sum(station_listeners) × sum(slot_coverage%) × 0.7
9. cost_per_contact = final_price / total_contacts
```

---

## 4. Мобильная адаптация (все компоненты)

### 4.1 ModernIndex.tsx
- Улучшить мобильное меню
- Адаптировать нижнюю панель станций для мобильных (прокрутка)

### 4.2 ModernHeroSection.tsx
- Уменьшить орбитальные логотипы на мобильных до 60x60px
- Уменьшить радиус орбиты
- Адаптивные размеры заголовков

### 4.3 Calculator.tsx
- Сетка слотов: 3 колонки на мобильных вместо 4-8
- Компактные карточки слотов с описаниями
- Стики-панель с ценой на мобильных

### 4.4 MediaPlanner.tsx
- Уменьшить отступы
- Адаптивные карточки результатов

---

## Технические детали

### Файлы для изменения:
1. `src/components/ModernHeroSection.tsx` - размеры логотипов, кнопка, высота
2. `src/components/FloatingRadio3D.tsx` - анимация смены частот
3. `src/components/SoundWaveVisualizer.tsx` - ширина контейнера
4. `src/pages/ModernIndex.tsx` - мобильная адаптация
5. `src/components/sections/MediaPlanner.tsx` - переименование, адаптация
6. `src/components/sections/Calculator.tsx` - полная переработка расчетов
7. `supabase/functions/media-planner/index.ts` - обновление промпта
8. `supabase/functions/send-media-plan/index.ts` - копия админу
9. `src/lib/export-utils.ts` - обновление формул расчета
